SRC_DIR=src/main/java
CLASSES_DIR=target/classes
TARGET_JAR=target/task.jar
MAIN_FILE=Main.java
SOURCE_FILES=`find $(SRC_DIR) -name '*.java'`

all: compile

compile: $(TARGET_JAR)

$(TARGET_JAR):
	mkdir -p $(CLASSES_DIR)
  # compile
	cd $(SRC_DIR); javac -g -cp ".:../../../$(CLASSES_DIR)" -d ../../../$(CLASSES_DIR) $(MAIN_FILE)
  # pack everything
	jar -cfe $@ Main -C $(CLASSES_DIR) .

clean:
	rm -rf target

.PHONY: all compile clean
